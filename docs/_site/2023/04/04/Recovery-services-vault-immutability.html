<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Recovery Services Vault Immutability | John Sun’s notes</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Recovery Services Vault Immutability" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Feature announced for General Availability in March 13, 2023" />
<meta property="og:description" content="Feature announced for General Availability in March 13, 2023" />
<link rel="canonical" href="http://localhost:4000/2023/04/04/Recovery-services-vault-immutability.html" />
<meta property="og:url" content="http://localhost:4000/2023/04/04/Recovery-services-vault-immutability.html" />
<meta property="og:site_name" content="John Sun’s notes" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-04-04T04:40:00-07:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Recovery Services Vault Immutability" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-04-04T04:40:00-07:00","datePublished":"2023-04-04T04:40:00-07:00","description":"Feature announced for General Availability in March 13, 2023","headline":"Recovery Services Vault Immutability","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2023/04/04/Recovery-services-vault-immutability.html"},"url":"http://localhost:4000/2023/04/04/Recovery-services-vault-immutability.html"}</script>
<!-- End Jekyll SEO tag -->
<!-- Favicon -->
  <link rel="icon" href="/favicon.ico" type="image/x-icon">

  <link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="John Sun&apos;s notes" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">John Sun&#39;s notes</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Recovery Services Vault Immutability</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2023-04-04T04:40:00-07:00" itemprop="datePublished">Apr 4, 2023
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Feature announced for <a href="https://azure.microsoft.com/en-au/updates/azure-backup-immutable-vaults-ga/">General Availability</a> in March 13, 2023</p>

<p>I’ll just be covering this for the Recovery Services Vault service as it’s what most enterprises would use to secure production data.</p>

<h2 id="what-is-immutability">What is immutability?</h2>

<p>Immutability of backups refers to the ability to ensure that backup data remains unaltered and cannot be deleted or modified for a specified period of time.
For Azure Backup vaults, there are 3 levels of immutability a vault can have</p>

<ul>
  <li>Disabled - The vault doesn’t have any immutability controls set</li>
  <li>Enabled  - The vault will not allow operations that could result in a loss of data, this control can be turned off</li>
  <li>Enabled and locked - As above, with the extra control that the control cannot be turned off</li>
</ul>

<p>This service is offered for both Azure Recovery Services Vaults and Azure Backup Vaults, enabling immutability prevents the following actions:</p>

<table>
  <thead>
    <tr>
      <th>Operation Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Stop protection with delete data</td>
      <td>A protected item can’t have its recovery points deleted before their respective expiry date. However, you can still stop protection of the instances while retaining data forever or until their expiry. (Same for Backup Vault)</td>
    </tr>
    <tr>
      <td>Modify backup policy to reduce retention</td>
      <td>Any actions that reduce the retention period in a backup policy are disallowed on Immutable vault. However, you can make policy changes that result in the increase of retention. You can also make changes to the schedule of a backup policy.</td>
    </tr>
    <tr>
      <td>Change backup policy to reduce retention</td>
      <td>Any attempt to replace a backup policy associated with a backup item with another policy with retention lower than the existing one is blocked. However, you can replace a policy with the one that has higher retention.</td>
    </tr>
  </tbody>
</table>

<h2 id="why-would-i-want-immutability">Why would I want immutability?</h2>

<p>This feature within Azure Backup is important for data protection and compliance, as it protects against accidental or malicious deletion of backups or tampering with backup policies that could result in a reduction of backups.</p>

<p>By enabling immutability, backups are made read-only (cannot be deleted) and can only be accessed for restore purposes. This helps to protect against ransomware attacks, accidental deletion, or any unauthorized modification to backup data.</p>

<h2 id="what-about-my-previously-set-recovery-services-vault-security-controls">What about my previously set recovery services vault security controls?</h2>

<p>Previously there was an irreversable security settings control which would email all subscription administrators whenever backup data was to be deleted, these would enter a soft-delete state for period of time with alerting. As a vault could not be removed before all backup data inside was removed, this essentially prevented the vault from deletion.</p>

<p>I’ve had a look around and it looks like these have now been separated out under “Enable soft delete and security settings for hybrid workloads”, although it looks like this checkbox can now be toggled off, the immutability control looks like it’s been separated out for more granular control.</p>

<p>Keep in mind this is not vault immutability! While it does help prevent your data from being deleted, this does not seem to prevent the switching of policies or reducing the retention period of existing policies that are used by a VM.</p>

<p><img src="/images/2023/Soft Delete Controls.png" alt="Soft Delete Controls" /></p>

<p>The previous controls around security features:</p>

<p><img src="/images/2023/oldsecuritysettings.png" alt="oldsecuritysettings" /></p>

<h2 id="approach-to-adoption">Approach to adoption</h2>

<p>As the enabled and locked form is actually what is immutable, this would be the target final state.</p>

<p>However as this state restricts our abillity to reduce and modify vault policy to be shorter, I would recommend enabling vault immutability (without locking) for a period of time until backup policies have been finalised before locking.</p>

<h2 id="how-do-i-to-set-this-control">How do I to set this control?</h2>

<p>You will first need <code class="language-plaintext highlighter-rouge">Contributor</code> or above permissions to the resource or the immutablility controls will not show</p>

<p>Within your Recovery Services Vault (1), navigate to properties (2), under “Immutable Vault”, select the “Settings” button (3) and update the immutability settings as required (4)</p>

<p><img src="/images/2023/Enable Vault Immutabilty.png" alt="Enable Vault Immutability" /></p>

<h2 id="microsoft-documentation">Microsoft Documentation</h2>

<p><a href="https://learn.microsoft.com/en-us/azure/backup/backup-azure-immutable-vault-concept">Immutable vault for Azure Backup</a></p>


  </div><a class="u-url" href="/2023/04/04/Recovery-services-vault-immutability.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">John Sun&#39;s notes</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">John Sun&#39;s notes</li><li><a class="u-email" href="mailto:johnsunjohn@msn.com">johnsunjohn@msn.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/rawpatty"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">rawpatty</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>A collection of notes from experience working across Microsoft technologies</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
